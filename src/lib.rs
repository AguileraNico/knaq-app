 use near_contract_standards::fungible_token::metadata::{
     FungibleTokenMetadata, FungibleTokenMetadataProvider, FT_METADATA_SPEC,
 };
 use near_contract_standards::fungible_token::FungibleToken;
 use near_sdk::borsh::{self, BorshDeserialize, BorshSerialize};
 use near_sdk::collections::LazyOption;
 use near_sdk::json_types::U128;
 use near_sdk::{
     env, log, near_bindgen, AccountId, require, Balance, BorshStorageKey, PanicOnDefault,
     PromiseOrValue
 };
 
 #[near_bindgen]
 #[derive(BorshDeserialize, BorshSerialize, PanicOnDefault)]
 pub struct Contract {
     token: FungibleToken,
     metadata: LazyOption<FungibleTokenMetadata>,
 }
 
 #[derive(BorshSerialize, BorshStorageKey)]
 enum StorageKey {
     FungibleToken,
     Metadata,
 }

 const ICON: &str = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjxzdmcgdmlld0JveD0iMCAwIDUwMCA1MDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQwX2xpbmVhcl80Ml8yMTc3IiB4MT0iNS45NTUwOCIgeTE9IjI4LjgzMiIgeDI9IjguNDM4NjQiIHkyPSIyOC44MzIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDEsIDAsIDAsIDEsIDIxOC44NDc1MzQsIDE1Ny40NjIwODIpIj4NCiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiM4MDJFOEYiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzI4M0Y5NCIvPg0KICAgIDwvbGluZWFyR3JhZGllbnQ+DQogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDFfbGluZWFyXzQyXzIxNzciIHgxPSIxMy4zODA2IiB5MT0iMCIgeDI9IjEzLjM4MDYiIHkyPSIyOS43NDgiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDEsIDAsIDAsIDEsIDIxOC44NDc1MzQsIDE1Ny40NjIwODIpIj4NCiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiMwMDdFQzMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzBBNDk3QSIvPg0KICAgIDwvbGluZWFyR3JhZGllbnQ+DQogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDJfbGluZWFyXzQyXzIxNzciIHgxPSIyLjQyOTkzIiB5MT0iMTkuODA2NiIgeDI9IjE0LjQ3MjciIHkyPSIxOS44MDY2IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgxLCAwLCAwLCAxLCAyMTguODQ3NTM0LCAxNTcuNDYyMDgyKSI+DQogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRkZEMzBEIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNFMzI3MjkiLz4NCiAgICA8L2xpbmVhckdyYWRpZW50Pg0KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQzX2xpbmVhcl80Ml8yMTc3IiB4MT0iMCIgeTE9IjE4LjQzNzUiIHgyPSIxMy45MjE1IiB5Mj0iMTguNDM3NSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMSwgMCwgMCwgMSwgMjE4Ljg0NzUzNCwgMTU3LjQ2MjA4MikiPg0KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzAwNzE2MCIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjMzlCNTRBIi8+DQogICAgPC9saW5lYXJHcmFkaWVudD4NCiAgPC9kZWZzPg0KICA8ZyBzdHlsZT0iIiB0cmFuc2Zvcm09Im1hdHJpeCg0LjA1NDE5MiwgMCwgMCwgNC4zNzE5ODcsIC04MDEuMjQ5NDUxLCAtNTk0LjMwMDY1OSkiPg0KICAgIDxwYXRoIGQ9Ik0gMjMwLjE1OSAyMDAuNTMyIEwgMjM2LjYzIDIwOC45NzkgQyAyMzYuNjc4IDIwOS4wNDIgMjM2LjcwOCAyMDkuMTE4IDIzNi43MTYgMjA5LjE5NyBDIDIzNi43MjQgMjA5LjI3NiAyMzYuNzEgMjA5LjM1NiAyMzYuNjc1IDIwOS40MjggQyAyMzYuNjQxIDIwOS40OTkgMjM2LjU4NyAyMDkuNTYgMjM2LjUyIDIwOS42MDIgQyAyMzYuNDUzIDIwOS42NDUgMjM2LjM3NiAyMDkuNjY3IDIzNi4yOTcgMjA5LjY2OCBMIDIzMS44ODYgMjA5LjY2OCBDIDIzMS44MjEgMjA5LjY2OCAyMzEuNzU2IDIwOS42NTIgMjMxLjY5OCAyMDkuNjIzIEMgMjMxLjY0IDIwOS41OTMgMjMxLjU4OSAyMDkuNTUxIDIzMS41NSAyMDkuNDk4IEwgMjI1LjA4OCAyMDAuODY5IEwgMjMwLjkyMSAxOTMuMDA0IEMgMjMwLjk2MSAxOTIuOTUxIDIzMS4wMTEgMTkyLjkwOSAyMzEuMDcgMTkyLjg3OSBDIDIzMS4xMjggMTkyLjg1IDIzMS4xOTIgMTkyLjgzNCAyMzEuMjU3IDE5Mi44MzQgTCAyMzUuNTIzIDE5Mi44MzQgQyAyMzUuNjAxIDE5Mi44MzcgMjM1LjY3NyAxOTIuODYyIDIzNS43NDMgMTkyLjkwNyBDIDIzNS44MDggMTkyLjk1MSAyMzUuODYgMTkzLjAxMyAyMzUuODkyIDE5My4wODYgQyAyMzUuOTI0IDE5My4xNTggMjM1LjkzNiAxOTMuMjM5IDIzNS45MjYgMTkzLjMxOCBDIDIzNS45MTUgMTkzLjM5NiAyMzUuODg0IDE5My40NzEgMjM1LjgzNCAxOTMuNTMzIEwgMjMwLjE1OSAyMDAuNTMyIFoiIGZpbGw9IiMzOTIyNjkiLz4NCiAgICA8cGF0aCBkPSJNIDI0MS40NjQgMTkyLjgyMSBMIDI0NC44MzEgMTkyLjgyMSBDIDI0NC45NSAxOTIuODIxIDI0NS4wNjUgMTkyLjg2OSAyNDUuMTUgMTkyLjk1NSBDIDI0NS4yMzQgMTkzLjA0MSAyNDUuMjgyIDE5My4xNTcgMjQ1LjI4MiAxOTMuMjc4IEwgMjQ1LjI4MiAxOTQuNTA0IEMgMjQ1LjkwOSAxOTMuODcxIDI0Ni42NTUgMTkzLjM3IDI0Ny40NzUgMTkzLjAzMSBDIDI0OC4yOTUgMTkyLjY5MSAyNDkuMTc0IDE5Mi41MTkgMjUwLjA2IDE5Mi41MjYgQyAyNTQuMTMzIDE5Mi41MjYgMjU2LjkwNSAxOTQuNTExIDI1Ni45MDUgMTk5Ljc5IEwgMjU2LjkwNSAyMDkuMjI3IEMgMjU2LjkwNCAyMDkuMzQ4IDI1Ni44NTYgMjA5LjQ2NCAyNTYuNzcyIDIwOS41NDkgQyAyNTYuNjg3IDIwOS42MzQgMjU2LjU3MyAyMDkuNjgzIDI1Ni40NTMgMjA5LjY4MyBMIDI1My4xMDYgMjA5LjY4MyBDIDI1My4wNDUgMjA5LjY4MiAyNTIuOTg1IDIwOS42NjkgMjUyLjkzIDIwOS42NDMgQyAyNTIuODc0IDIwOS42MTggMjUyLjgyNCAyMDkuNTgyIDI1Mi43ODMgMjA5LjUzNyBDIDI1Mi43NDIgMjA5LjQ5MSAyNTIuNzEgMjA5LjQzOCAyNTIuNjg5IDIwOS4zOCBDIDI1Mi42NjkgMjA5LjMyMiAyNTIuNjYgMjA5LjI2IDI1Mi42NjQgMjA5LjE5OSBMIDI1Mi42NjQgMjAwLjUzMiBDIDI1Mi42NjQgMTk3LjgzNiAyNTEuMjk1IDE5Ni41NjUgMjQ4LjkzMSAxOTYuNTY1IEMgMjQ4LjI0NSAxOTYuNTY3IDI0Ny41NjggMTk2LjcxMiAyNDYuOTQgMTk2Ljk5MiBDIDI0Ni4zMTMgMTk3LjI3MSAyNDUuNzQ5IDE5Ny42NzggMjQ1LjI4NSAxOTguMTg4IEwgMjQ1LjI4NSAyMDkuMTk5IEMgMjQ1LjI4NSAyMDkuMzIgMjQ1LjIzNyAyMDkuNDM2IDI0NS4xNTMgMjA5LjUyMiBDIDI0NS4wNjggMjA5LjYwNyAyNDQuOTUzIDIwOS42NTUgMjQ0LjgzNCAyMDkuNjU1IEwgMjQxLjQ2NCAyMDkuNjU1IEMgMjQxLjM0NyAyMDkuNjUyIDI0MS4yMzUgMjA5LjYwMiAyNDEuMTUzIDIwOS41MTcgQyAyNDEuMDcyIDIwOS40MzIgMjQxLjAyNiAyMDkuMzE4IDI0MS4wMjYgMjA5LjE5OSBMIDI0MS4wMjYgMTkzLjI3OCBDIDI0MS4wMjYgMTkzLjE1OSAyNDEuMDcyIDE5My4wNDUgMjQxLjE1MyAxOTIuOTU5IEMgMjQxLjIzNSAxOTIuODc0IDI0MS4zNDcgMTkyLjgyNSAyNDEuNDY0IDE5Mi44MjEgWiIgZmlsbD0iIzM5MjI2OSIvPg0KICAgIDxwYXRoIGQ9Ik0gMjYyLjgyOCAxOTQuMzc5IEMgMjYyLjc5MyAxOTQuMjc2IDI2Mi43OTYgMTk0LjE2MyAyNjIuODM2IDE5NC4wNjEgQyAyNjIuODc2IDE5My45NTkgMjYyLjk1IDE5My44NzYgMjYzLjA0NiAxOTMuODI1IEMgMjY0Ljc2MSAxOTIuOTIzIDI2Ni42NiAxOTIuNDM3IDI2OC41OTMgMTkyLjQwNiBDIDI3My41MTggMTkyLjQwNiAyNzUuMjU3IDE5NC45NTEgMjc1LjI1NyAxOTkuNDA2IEwgMjc1LjI1NyAyMDkuMTk5IEMgMjc1LjI1NyAyMDkuMzIgMjc1LjIxIDIwOS40MzYgMjc1LjEyNSAyMDkuNTIyIEMgMjc1LjA0IDIwOS42MDcgMjc0LjkyNiAyMDkuNjU1IDI3NC44MDYgMjA5LjY1NSBMIDI3Mi4wMDYgMjA5LjY1NSBDIDI3MS44ODYgMjA5LjY1NSAyNzEuNzcyIDIwOS42MDcgMjcxLjY4NyAyMDkuNTIyIEMgMjcxLjYwMiAyMDkuNDM2IDI3MS41NTUgMjA5LjMyIDI3MS41NTUgMjA5LjE5OSBMIDI3MS41NTUgMjA3LjcyMSBDIDI3MC42NjUgMjA4Ljk3OSAyNjguODg5IDIwOS44OTEgMjY2LjYzIDIwOS44OTEgQyAyNjMuNTk0IDIwOS44OTEgMjYxLjQxIDIwNy45ODIgMjYxLjQxIDIwNC43MjYgQyAyNjEuNDEgMjAxLjAyIDI2NC4xMTMgMTk5LjI2MSAyNjcuNDgzIDE5OS4yNjEgQyAyNjguOTYzIDE5OS4yNjEgMjcwLjQ0NCAxOTkuNzQ5IDI3MS4yNTkgMjAwLjM0NyBDIDI3MS4zNzEgMTk3LjUzNyAyNzAuNjM3IDE5Ni4wMDUgMjY4LjE0OCAxOTYuMDA1IEMgMjY2Ljc4NyAxOTYuMDExIDI2NS40NDYgMTk2LjMzNCAyNjQuMjI4IDE5Ni45NDkgQyAyNjQuMTcxIDE5Ni45NzcgMjY0LjEwOCAxOTYuOTkzIDI2NC4wNDQgMTk2Ljk5NSBDIDI2My45OCAxOTYuOTk2IDI2My45MTYgMTk2Ljk4NCAyNjMuODU3IDE5Ni45NTkgQyAyNjMuNzk4IDE5Ni45MzMgMjYzLjc0NSAxOTYuODk1IDI2My43MDIgMTk2Ljg0OCBDIDI2My42NTkgMTk2LjggMjYzLjYyNiAxOTYuNzQzIDI2My42MDYgMTk2LjY4MiBMIDI2Mi44MjggMTk0LjM3OSBaIE0gMjcxLjI1OSAyMDQuNzI2IEwgMjcxLjI1OSAyMDMuMDA1IEMgMjcwLjUxOSAyMDIuNDQ1IDI2OS41NTUgMjAyLjE4MSAyNjguMzM1IDIwMi4xODEgQyAyNjYuOTI5IDIwMi4xODEgMjY1LjY2OSAyMDIuODU0IDI2NS42NjkgMjA0LjI3NiBDIDI2NS42NjkgMjA1LjUzNCAyNjYuNzA1IDIwNi4yNjEgMjY4LjAzOSAyMDYuMjYxIEMgMjY5LjgxNiAyMDYuMjYxIDI3MC43NDMgMjA1LjQ3NCAyNzEuMjU5IDIwNC43MjYgWiIgZmlsbD0iIzM5MjI2OSIvPg0KICAgIDxwYXRoIGQ9Ik0gMjkyLjYwNCAyMDguODA3IEMgMjkxLjM3NyAyMDkuNjA1IDI4OS45NTMgMjEwLjA0MSAyODguNDk0IDIxMC4wNjUgQyAyODMuMTYyIDIxMC4wNjUgMjc5LjgzIDIwNi41NDUgMjc5LjgzIDIwMS4yMzEgQyAyNzkuODMgMTk2LjMyNyAyODMuNzUzIDE5Mi4zOTggMjg5LjM4MSAxOTIuMzk4IEMgMjkyLjIzMSAxOTIuMzk4IDI5NS4wODQgMTkzLjI5NyAyOTYuODQ4IDE5NC40MiBMIDI5Ni44NDggMjE2LjQ0MiBDIDI5Ni44NDggMjE2LjYzIDI5Ni43NzMgMjE2LjgxMSAyOTYuNjQyIDIxNi45NDQgQyAyOTYuNTEgMjE3LjA3OCAyOTYuMzMxIDIxNy4xNTMgMjk2LjE0NCAyMTcuMTUzIEwgMjkzLjI5NSAyMTcuMTUzIEMgMjkzLjEwOCAyMTcuMTUzIDI5Mi45MjkgMjE3LjA3OCAyOTIuNzk4IDIxNi45NDQgQyAyOTIuNjY2IDIxNi44MTEgMjkyLjU5MiAyMTYuNjMgMjkyLjU5MiAyMTYuNDQyIEwgMjkyLjYwNCAyMDguODA3IFogTSAyOTIuNjA0IDIwNC41MzggTCAyOTIuNjA0IDE5Ny4yNzcgQyAyOTEuNTk1IDE5Ni43NTUgMjkwLjQ4IDE5Ni40NzMgMjg5LjM0NyAxOTYuNDUzIEMgMjg2LjA5IDE5Ni40NTMgMjg0LjM4NSAxOTguNzc0IDI4NC4zODUgMjAxLjQzMyBDIDI4NC4zODUgMjA0LjA5MSAyODYuMTk4IDIwNi4wNzYgMjg5LjA1MSAyMDYuMDc2IEMgMjkwLjM5MSAyMDYuMDYgMjkxLjY2OSAyMDUuNTA4IDI5Mi42MDcgMjA0LjU0MSIgZmlsbD0iIzM5MjI2OSIvPg0KICAgIDxwYXRoIGQ9Ik0gMjI0LjgwMyAxODguMDI0IEwgMjI0LjgwMyAyMDAuODY2IEMgMjI3LjUzNyAxOTkuOTc5IDIyNy4yNTQgMTk2LjYxMyAyMjcuMjU0IDE5Ni42MTMgTCAyMjcuMjU0IDE4Ni41NzQgTCAyMjUuMzMxIDE4Ni4yOTQgTCAyMjQuODAzIDE4OC4wMjQgWiIgZmlsbD0idXJsKCNwYWludDBfbGluZWFyXzQyXzIxNzcpIi8+DQogICAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0gMjI3LjUzMyAxNTguMzY4IEMgMjI3LjUzMyAxNTguNTQ3IDIyNy41ODYgMTU4LjcyMiAyMjcuNjg0IDE1OC44NzEgQyAyMjcuNzgzIDE1OS4wMiAyMjcuOTIzIDE1OS4xMzcgMjI4LjA4NiAxNTkuMjA1IEMgMjI4LjE3OSAxNTkuMjQ0IDIyOC4yNzYgMTU5LjI2NiAyMjguMzc1IDE1OS4yNzIgQyAyMjguMzkyIDE1OS40MSAyMjguNDE3IDE1OS41NDcgMjI4LjQ1IDE1OS42ODIgQyAyMjguNTYyIDE2MC4xNDggMjI4Ljc2NCAxNjAuNTg2IDIyOS4wNDQgMTYwLjk3MiBDIDIyOS4zMjQgMTYxLjM1OCAyMjkuNjc3IDE2MS42ODUgMjMwLjA4MiAxNjEuOTMzIEMgMjMwLjQ4NiAxNjIuMTgyIDIzMC45MzYgMTYyLjM0NyAyMzEuNDA0IDE2Mi40MiBDIDIzMS44NzkgMTYyLjQ5NCAyMzIuNzA3IDE2Mi4zNDEgMjMzLjM3OCAxNjIuMTUyIEMgMjMzLjY2NiAxNjIuMjgxIDIzMy45NzEgMTYyLjM3MSAyMzQuMjg0IDE2Mi40MiBDIDIzNC45NjkgMTYyLjUyNyAyMzYuMzg3IDE2Mi4xNjIgMjM3LjAwOSAxNjEuODk4IEMgMjM3LjA0MSAxNjEuODg3IDIzNy4wNzMgMTYxLjg3NSAyMzcuMTAzIDE2MS44NiBDIDIzNy4xNDkgMTYxLjg2IDIzNy4yMzMgMTYxLjY2NSAyMzcuMDI1IDE2MS42NTIgTCAyMzYuOTM1IDE2MS42NTIgQyAyMzMuNzgzIDE2MS41OTkgMjMyLjMzMSAxNjAuMTY3IDIzMS43MDMgMTU5LjE4MSBDIDIzMS43OSAxNTkuMTM3IDIzMS44NyAxNTkuMDggMjMxLjk0IDE1OS4wMSBDIDIzMi4wNjUgMTU4Ljg4MyAyMzIuMTUxIDE1OC43MjIgMjMyLjE4NSAxNTguNTQ3IEMgMjMyLjIyIDE1OC4zNzEgMjMyLjIwMyAxNTguMTg5IDIzMi4xMzYgMTU4LjAyNCBDIDIzMi4wNjggMTU3Ljg1OCAyMzEuOTU0IDE1Ny43MTYgMjMxLjgwNyAxNTcuNjE2IEMgMjMxLjY2IDE1Ny41MTYgMjMxLjQ4NyAxNTcuNDYzIDIzMS4zMSAxNTcuNDYyIEMgMjMxLjE5MyAxNTcuNDYyIDIzMS4wNzYgMTU3LjQ4NiAyMzAuOTY3IDE1Ny41MzEgQyAyMzAuODU5IDE1Ny41NzcgMjMwLjc2IDE1Ny42NDMgMjMwLjY3NyAxNTcuNzI3IEMgMjMwLjU5MyAxNTcuODEyIDIzMC41MjcgMTU3LjkxMSAyMzAuNDgyIDE1OC4wMjEgQyAyMzAuNDM3IDE1OC4xMzEgMjMwLjQxNCAxNTguMjQ5IDIzMC40MTQgMTU4LjM2OCBMIDIzMC40MTEgMTU4LjM2OCBDIDIzMC40MTEgMTU4LjU0NyAyMzAuNDY0IDE1OC43MjIgMjMwLjU2MiAxNTguODcxIEMgMjMwLjY2IDE1OS4wMiAyMzAuOCAxNTkuMTM2IDIzMC45NjMgMTU5LjIwNSBDIDIzMS4wNTcgMTU5LjI0NCAyMzEuMTU2IDE1OS4yNjcgMjMxLjI1NiAxNTkuMjczIEMgMjMxLjI3MyAxNTkuNDEgMjMxLjI5OCAxNTkuNTQ3IDIzMS4zMzEgMTU5LjY4MiBDIDIzMS40NDMgMTYwLjE0OCAyMzEuNjQ1IDE2MC41ODYgMjMxLjkyNSAxNjAuOTcyIEMgMjMyLjA1NSAxNjEuMTUxIDIzMi4yMDEgMTYxLjMxOCAyMzIuMzYgMTYxLjQ2OSBDIDIzMC4zNTUgMTYxLjA0NCAyMjkuMzI2IDE1OS45NyAyMjguODIzIDE1OS4xODIgQyAyMjguOTEyIDE1OS4xMzggMjI4Ljk5MyAxNTkuMDggMjI5LjA2MyAxNTkuMDA5IEMgMjI5LjE4OCAxNTguODgyIDIyOS4yNzMgMTU4LjcyMSAyMjkuMzA4IDE1OC41NDUgQyAyMjkuMzQzIDE1OC4zNjkgMjI5LjMyNSAxNTguMTg3IDIyOS4yNTcgMTU4LjAyMSBDIDIyOS4xODkgMTU3Ljg1NiAyMjkuMDc0IDE1Ny43MTQgMjI4LjkyNyAxNTcuNjE1IEMgMjI4Ljc4IDE1Ny41MTUgMjI4LjYwNiAxNTcuNDYyIDIyOC40MjkgMTU3LjQ2MiBDIDIyOC4xOTIgMTU3LjQ2MiAyMjcuOTY0IDE1Ny41NTggMjI3Ljc5NiAxNTcuNzI3IEMgMjI3LjYyOCAxNTcuODk3IDIyNy41MzMgMTU4LjEyOCAyMjcuNTMzIDE1OC4zNjggWiBNIDIzNy4xNzEgMTY0LjEyOSBDIDIzNy4wMjEgMTYzLjg0OSAyMzYuODI4IDE2My41OTIgMjM2LjU5NiAxNjMuMzY5IEMgMjM2LjAyNyAxNjIuODIyIDIzNS4yNjkgMTYyLjUyIDIzNC40ODQgMTYyLjUyOCBDIDIzMy42OTkgMTYyLjUzNSAyMzIuOTQ4IDE2Mi44NTIgMjMyLjM5IDE2My40MSBDIDIzMS44MzEgMTYzLjk2OSAyMzEuNTEgMTY0LjcyNSAyMzEuNDk0IDE2NS41MTkgTCAyMzEuNDk3IDE2NS41MTYgQyAyMzEuNDk3IDE2Ni4yMDMgMjMxLjcyNiAxNjYuODY5IDIzMi4xNDYgMTY3LjQwOCBDIDIzMS4zMDcgMTY5Ljk0NSAyMzEuNjY4IDE3MC43ODIgMjMyLjYxMyAxNzIuOTcxIEMgMjMyLjY2NiAxNzMuMDk0IDIzMi43MjIgMTczLjIyMiAyMzIuNzc5IDE3My4zNTUgQyAyMzMuNDM1IDE3NC44ODEgMjMyLjc3OSAxNzcuMjY2IDIzMi43NzkgMTc3LjI2NiBDIDIzMy44NzcgMTc4Ljg3MyAyMzIuNjk4IDE4MS45NjUgMjMwLjE2MiAxODEuOTY1IEMgMjI1LjcxIDE4MS45NjkgMjI1LjA4OCAxODYuNTM2IDIyNS4wODggMTg2LjUzNiBDIDIyOS42MTUgMTg4LjE1NyAyMzYuNTY4IDE4Ni45MzkgMjM4LjQ2NiAxODEuOTU2IEMgMjM5LjY2MSAxNzguODM2IDIzOC4wNTEgMTc2Ljk4NSAyMzYuMzg4IDE3NS4wNzIgQyAyMzUuMjI0IDE3My43MzMgMjM0LjAzMyAxNzIuMzYzIDIzMy43NjIgMTcwLjUwOCBDIDIzMy43MTkgMTY5LjgzOCAyMzMuNzcyIDE2OS4xNjUgMjMzLjkyIDE2OC41MSBDIDIzMy45MiAxNjguNTEgMjMzLjkyIDE2OC41MSAyMzMuOTIgMTY4LjUxIEMgMjM0LjE5OSAxNjcuNzIzIDIzNC42ODEgMTY3LjAyNCAyMzUuMzE2IDE2Ni40ODggQyAyMzUuOTA4IDE2NS45ODcgMjM2LjYxNCAxNjUuNjQ1IDIzNy4zNjggMTY1LjQ5IEMgMjM3LjM3NCAxNjUuNDg5IDIzNy4zOCAxNjUuNDg4IDIzNy4zODYgMTY1LjQ4NyBDIDIzNy45ODIgMTY1LjM4NyAyMzguNTg5IDE2NS4zNjYgMjM5LjE5IDE2NS40MjQgQyAyMzkuMjI2IDE2NS40MjggMjM5LjI2MiAxNjUuNDE5IDIzOS4yOTMgMTY1LjQgQyAyMzkuMzIzIDE2NS4zOCAyMzkuMzQ2IDE2NS4zNTEgMjM5LjM1OSAxNjUuMzE3IEMgMjM5LjM3MSAxNjUuMjgyIDIzOS4zNzEgMTY1LjI0NSAyMzkuMzYgMTY1LjIxIEMgMjM5LjM0OSAxNjUuMTc2IDIzOS4zMjYgMTY1LjE0NiAyMzkuMjk2IDE2NS4xMjYgQyAyMzguNjYgMTY0LjY4NiAyMzcuOTYgMTY0LjM0OSAyMzcuMjIxIDE2NC4xMjggTCAyMzcuMTc3IDE2NC4xMjggQyAyMzcuMTc1IDE2NC4xMjggMjM3LjE3MyAxNjQuMTI4IDIzNy4xNzEgMTY0LjEyOSBaIiBmaWxsPSJ1cmwoI3BhaW50MV9saW5lYXJfNDJfMjE3NykiLz4NCiAgICA8cGF0aCBkPSJNIDIzMi42MzYgMTc3LjM3NiBDIDIzMi42MzYgMTc3LjM3NiAyMzIuMjQxIDE3OS4yIDIyOC4wMzUgMTc5LjU3OCBDIDIyNy43NzIgMTc5LjYwMSAyMjcuNTExIDE3OS42NDEgMjI3LjI1NCAxNzkuNjk3IEMgMjI3LjI1NCAxNzkuNjc1IDIyNy4xNzMgMTc5LjY5NyAyMjcuMDk1IDE3OS43MzIgQyAyMjcuMDE3IDE3OS43NjcgMjI2Ljk0IDE3OS43ODkgMjI2LjkzNiAxNzkuNzY3IEMgMjIwLjczNiAxODEuNDc1IDIyMS4zOTMgMTkwLjMxMiAyMjEuMzkzIDE5MC4zMTIgTCAyMjEuMjc3IDIxMy43OTYgTCAyMjEuMzkzIDIxMy44MyBMIDIyMS44NzggMjEzLjczMyBDIDIyMS44NzggMjEzLjczMyAyMjUuMDIzIDIxMi43NjEgMjI1LjAyMyAyMDUuMTEgQyAyMjUuMDIzIDIwNS4xMSAyMjUuMDQyIDE5NC41NDkgMjI0Ljk4IDE5MC41MDcgQyAyMjQuOTUyIDE4OC43ODkgMjI1LjA0NSAxODYuOTU1IDIyNS42NTIgMTg1LjMwNiBDIDIyNi4yNCAxODMuNzEyIDIyNy43MyAxODIuNjAxIDIyOS4zNDEgMTgyLjI1MiBDIDIyOS42NDkgMTgyLjE4NCAyMjkuOTYxIDE4Mi4xMzcgMjMwLjI3NSAxODIuMTEgQyAyMzAuNjQ2IDE4Mi4wOTEgMjMxLjAxMSAxODIuMDExIDIzMS4zNTcgMTgxLjg3NCBDIDIzMS45MDUgMTgxLjY0MSAyMzIuMzcyIDE4MS4yNSAyMzIuNzAxIDE4MC43NSBDIDIzMy4wMyAxODAuMjUgMjMzLjIwNSAxNzkuNjYzIDIzMy4yMDUgMTc5LjA2MiBDIDIzMy4yMDYgMTc4LjQxNyAyMzMuMDAzIDE3Ny43ODkgMjMyLjYyNyAxNzcuMjY5IEMgMjMyLjY1NSAxNzcuMzE2IDIzMi42NjcgMTc3LjM1NyAyMzIuNjUxIDE3Ny4zODgiIGZpbGw9InVybCgjcGFpbnQyX2xpbmVhcl80Ml8yMTc3KSIvPg0KICAgIDxwYXRoIGQ9Ik0gMjI2LjMyNCAxNzYuNDUzIEMgMjIyLjU3MiAxNzcuOTMyIDIxOS4xMTUgMTgyLjgwOCAyMTguOTI5IDE4OS41MzQgQyAyMTguNzIzIDE5Ni44ODMgMjE4Ljk3MiAyMTQuMTEgMjE4Ljk3MiAyMjEuNDYyIEMgMjIxLjE1IDIyMS40NjIgMjIxLjMwOSAyMTYuMTE0IDIyMS4zMDkgMjE2LjExNCBDIDIyMS4zMDkgMjE2LjExNCAyMjEuMzY1IDIwMC42OTkgMjIxLjQwMiAxOTEuNzAxIEMgMjIxLjQzNiAxODMuNDU5IDIyMy42MTQgMTgwLjYxMiAyMjcuMjIzIDE3OS43MDMgQyAyMjcuNDkgMTc5LjYzOSAyMjcuNzYxIDE3OS41OTcgMjI4LjAzNSAxNzkuNTc3IEMgMjMyLjI0NCAxNzkuMjA5IDIzMi42MzYgMTc3LjM3NSAyMzIuNjM2IDE3Ny4zNzUgQyAyMzIuNjM2IDE3Ny4zNzUgMjMyLjYzNiAxNzcuMzA2IDIzMi42MTEgMTc3LjI1OSBMIDIzMi41MyAxNzcuMTQ4IEMgMjMyLjQzNyAxNzcuMDM4IDIzMi4zMDYgMTc2LjkxMyAyMzIuMjA0IDE3Ni43OTkgQyAyMzEuODk2IDE3Ni41MTggMjMxLjUzNSAxNzYuMzA0IDIzMS4xNDMgMTc2LjE3IEwgMjMxLjAwMyAxNzYuMTI2IEMgMjMwLjQ5NyAxNzUuOTggMjI5Ljk3MyAxNzUuOTA0IDIyOS40NDcgMTc1LjkgQyAyMjkuNDQ3IDE3NS45IDIyOS4zNDggMTc1LjkgMjI5LjE2NCAxNzUuOSBDIDIyOC4xOTUgMTc1LjkxNiAyMjcuMjM3IDE3Ni4xMSAyMjYuMzM2IDE3Ni40NzIiIGZpbGw9InVybCgjcGFpbnQzX2xpbmVhcl80Ml8yMTc3KSIvPg0KICA8L2c+DQo8L3N2Zz4=";
 
 #[near_bindgen]
 impl Contract {

     #[init]
     pub fn new_default_meta(owner_id: AccountId) -> Self {
         Self::new(
             owner_id,
             FungibleTokenMetadata {
                 spec: FT_METADATA_SPEC.to_string(),
                 name: "Knaq fungible token Test".to_string(),
                 symbol: "KNAQ-TEST".to_string(),
                 icon: Some(ICON.to_string()),
                 reference: None,
                 reference_hash: None,
                 decimals: 10,
             },
         )
     }

     #[init]
     pub fn new(owner_id: AccountId, metadata: FungibleTokenMetadata) -> Self {
         require!(!env::state_exists(), "Already initialized");
         metadata.assert_valid();
         const TOTAL_SUPPLY: Balance = 1_000_000_000_000_000_000_000_000_000_000_000_000;
         let mut this = Self {
             token: FungibleToken::new(StorageKey::FungibleToken),
             metadata: LazyOption::new(StorageKey::Metadata, Some(&metadata)),
         };
         this.token.internal_register_account(&owner_id);
         this.token.internal_deposit(&owner_id, TOTAL_SUPPLY);
 
         near_contract_standards::fungible_token::events::FtMint {
             owner_id: &owner_id,
             amount: &TOTAL_SUPPLY.into(),
             memo: Some("new tokens are minted"),
         }.emit();
 
         this
     }
 
     fn on_account_closed(&mut self, account_id: AccountId, balance: Balance) {
         log!("Closed @{} with {}", account_id, balance);
     }
 
     fn on_tokens_burned(&mut self, account_id: AccountId, amount: Balance) {
         log!("Account @{} burned {}", account_id, amount);
     }
 }
 
 near_contract_standards::impl_fungible_token_core!(Contract, token, on_tokens_burned);
 near_contract_standards::impl_fungible_token_storage!(Contract, token, on_account_closed);
 
 #[near_bindgen]
 impl FungibleTokenMetadataProvider for Contract {
     fn ft_metadata(&self) -> FungibleTokenMetadata {
         self.metadata.get().unwrap()
     }
 }
